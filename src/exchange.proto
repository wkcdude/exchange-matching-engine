syntax = "proto3";

package exchange;

service matching_engine {
    rpc SubmitOrder (SubmitOrderRequest) returns (SubmitOrderResponse);
    rpc CancelOrder (CancelOrderRequest) returns (CancelOrderResponse);
}

enum OrderSide {
    ORDER_SIDE_UNSPECIFIED = 0;
    ORDER_SIDE_BUY = 1;
    ORDER_SIDE_SELL = 2;
}

enum OrderType {
    ORDER_TYPE_UNSPECIFIED = 0;
    ORDER_TYPE_MARKET = 1;
    ORDER_TYPE_LIMIT = 2;
}

enum OrderLifeTime {
    ORDER_LIFE_TIME_UNSPECIFIED = 0;
    ORDER_LIFE_TIME_GOOD_TILL_CANCEL = 1;
    ORDER_LIFE_TIME_FILL_OR_KILL = 2;
    ORDER_LIFE_TIME_IMMIDIATE_OR_CANCEL = 3;
}

enum OrderStatus {
    ORDER_STATUS_UNSPECIFIED = 0;
    ORDER_STATUS_NEW = 1;
    ORDER_STATUS_OPEN = 2;
    ORDER_STATUS_PARTIALLY_FILLED = 3;
    ORDER_STATUS_FILLED = 4;
    ORDER_STATUS_CANCELED = 5;
    ORDER_STATUS_REJECTED = 6;
    ORDER_STATUS_EXPIRED = 7;
}

message OrderRecord {
    string order_id = 1;
    OrderSide order_side = 2;
    OrderType order_type = 3;
    OrderLifeTime order_life_time = 4;
    OrderStatus order_status = 5;
    double price = 6;
    double initial_quantity = 7;
    double remaining_quantity = 8;
    string ticker = 9;
}

message SubmitOrderRequest {
    OrderSide order_side = 1;
    OrderType order_type = 2;
    OrderLifeTime order_life_time = 3;
    double price = 4;
    double initial_quantity = 5;
    string ticker = 6;
}

message SubmitOrderResponse {
    string message = 1;
    int32 code = 2;
}

message CancelOrderRequest {
    string order_id = 1;
}

message CancelOrderResponse {
    string message = 1;
    int32 code = 2;
}
